# 风风博客开发心得（一）：项目总览与架构解析

> 本文为系列开篇，旨在带你快速浏览这个全栈博客项目的“骨架”。  
> 内容已与最新的前后端代码（2025/12/12 版本）完全对齐。

## 1. 碎碎念：为什么又要造轮子？

嗨！欢迎来到风风博客的开发手记。

老实说，社区上成熟的博客系统多如牛毛，`Wordpress`、`Hexo`、`Halo`……随便拎一个出来都能打。

但作为一个“爱折腾”的爱好者，总觉得别人的轮子虽然圆，但不够顺手。

于是，这个项目诞生了。起初它只是一个想把 CSS 写出花来的纯前端页面，后来为了能在网页上直接写文章，又硬着头皮写了后端。

现在的它，已经是一个**全栈的动态网站**，不仅有花哨的前台展示，还有一个五脏俱全的**在线内容管理系统 (CMS)**。

## 2. 技术栈：简单粗暴但好用

我们的目标是：用最舒服的姿势写代码。

### 2.1 前端 (Frontend) - `src/`

- **核心框架**: Vue 3 (Composition API) + TypeScript + Vite。这一套现在是标配了，开发体验极佳。
- **状态管理**: Pinia。虽然官方推荐把 Store 放在 `src/stores`，但我把它们按照业务模块塞进了 `src/views/stores/`（比如 `articleStore.ts`, `adminStore.ts`），找起来更直观。
- **HTTP 通信**: Axios。所有的魔法都在 `src/api/index.ts` 里，那里藏着一个自动处理 JWT 续签的拦截器，后面细说。
- **Markdown**: 使用 `vue-markdown-render` 组件。在 `src/composables/useArticleContent.ts` 里可以看到，我们并没有手写繁琐的 render 逻辑，而是直接把组件抛出去用，省时省力。

### 2.2 后端 (Backend) - `backend/`

- **核心框架**: Flask。Python 写起来就是快！（性能...不听不听！( ˘･з･)）
- **大管家 `app.py`**: 这是一个略显庞大的单文件应用（Monolith）。所有的 API 路由、数据库模型（User, Article, Friend...）都在这一个文件里。虽然这不符合“最佳实践”，但对于个人博客来说，**找代码只需要滚动鼠标滚轮**，简直不要太爽。
- **数据库**: SQLite + SQLAlchemy。文件型数据库，备份只需要复制一个 `blog.db` 文件，方便的咧。
- **安全**: Flask-JWT-Extended。用来发令牌（Token），保护我们的后台接口不被邪恶怪兽入侵。

## 3. 核心机制：它是怎么跑起来的？

### 3.1 数据的流动

整个应用的数据流非常清晰：

1.  **用户操作**: 比如你在后台点击了“保存文章”。
2.  **Pinia Store**: `articleStore` 接到指令，调用封装好的 API。
3.  **Axios 拦截器**: (`src/api/index.ts`) 就像一个尽职的门卫，它会检查你口袋里有没有 `access_token`，如果没有或者过期了，它甚至会偷偷帮你去后端换个新的（Refresh Token），然后再把请求发出去。这一切对用户都是无感的。
4.  **Flask 后端**: `app.py` 里的路由函数接收到 JSON 数据，通过 SQLAlchemy 塞进 `blog.db`。

### 3.2 静态资源的大迁徙

这是一个比较有趣的坑。

在纯前端时代，图片都放在 `public/` 下。有了后端之后，上传的图片需要放在后端服务器上。

为了兼容旧数据，我写了一个超暴力的脚本 `backend/init_db.py`。

当你运行它时，它不仅会把 JSON 里的文章导入数据库，还会化身“搬运工”，把前端 `public/friends` 和 `public/artwork` 里的图片，物理复制到后端的 `backend/static/` 目录下。

这样，无论你是上传的新图，还是以前的老图，后端都能统一通过 `/static/...` 路径吐出来。

## 4. 怎么把这玩意跑起来？

如果你想在本地把玩一下，需要同时启动前后端“双引擎”。

### 4.1 启动后端引擎

进入 `backend/` 目录，准备好 Python 环境：

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 创建管理员账号 (这是我在 app.py 里特意留的一个 CLI 命令)
# 它会提示你输入用户名和密码，并自动初始化数据库表
flask create-admin

# 3. (可选) 填充示例数据
# 警告：这会清空现有数据！它会把 public/ 下的预制文章和图片导入数据库
python init_db.py

# 4. 点火！
python app.py
```

### 4.2 启动前端引擎

回到项目根目录：

```bash
npm install
npm run dev
```

现在，打开浏览器访问 `http://localhost:5173`，你应该能看到那个花里胡哨的首页了。

## 5. 下集预告

这一篇只是个开胃菜。接下来，我们会深入到具体的实现细节中去。

下一篇，我们将聊聊**前端架构设计与页面布局**。我会讲讲我是如何用 CSS 把页面做成“玻璃质感”的，以及那个让我掉头发的响应式布局。

Stay tuned!

---

> 没有未来的小风酱 著  
> 2025-12-12重写 （已与源码核对，确认 app.py 还是那么长，init_db.py 还是那么暴力）
